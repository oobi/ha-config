debug_plant_sensors:
  alias: Debug Plant Sensor Values
  sequence:
  - variables: !include ../automations/plant_config.yaml
  - action: persistent_notification.create
    data:
      title: "\U0001F50D Plant Sensor Debug"
      message: >-
        Executed: {{ now().strftime('%-d %B %Y at %H:%M:%S') }}

        {% for p in plants %}
        {{ p.name }}:
          Problem: {{ p.problem_sensor }} = {{ states(p.problem_sensor) }}
          Problem attribute: {{ state_attr(p.problem_sensor, 'problem') }}
          Battery: {{ p.battery_sensor }} = {{ states(p.battery_sensor) }}%
          Light: {{ p.light }} = {{ states(p.light) }}
        {% endfor %}
  mode: single
  icon: mdi:bug
